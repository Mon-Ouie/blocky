This is the INSTALL file for the IOSKETCH roguelike engine.
Installation and basic playing instructions are provided. 

1. You need a Common Lisp implementation. Only tested on SBCL right
   now. You must also have the SDL libraries installed. How to do this
   is beyond the scope of this document. See libsdl.org for more
   information. In addition, the LISPBUILDER-SDL libraries are also
   required and these should be compiled from their latest
   SVN. (see below for instructions.)

   Your Linux distribution will have SDL packages for sdl, sdl-image,
   sdl-mixer, and sdl-gfx, all of which are required libraries.

2. If you have not already done so, download IOSKETCH:
  
   mkdir ~/src
   cd ~/src
   git clone git://github.com/dto/iosketch.git 

3. Then link the iosketch.asd file into your ~/.sbcl/systems directory:

   mkdir ~/.sbcl
   mkdir ~/.sbcl/systems
   ln -s ~/src/iosketch/iosketch.asd ~/.sbcl/systems

4. Download and install a required library called PROTON. Example
   commands:

   mkdir ~/src
   cd ~/src
   git clone git://github.com/dto/proton.git

   Then link the proton.asd file:

   ln -s ~/src/proton/proton.asd ~/.sbcl/systems

5a. Install some prerequisites for LISPBUILDER-SDL. This should be quick.
    
    First enter the SBCL prompt by running "sbcl" in a terminal or shell.

   (require :asdf)
   (require :asdf-install)
   (asdf-install:install :cffi)

   If it asks about any GPG-KEY-CHECKS, press the appropriate listed
   key to skip them.

   Now install your GNU/Linux distribution's packages for libsdl,
   libsdl-image, libsdl-mixer, and libsdl-gfx.

5b. The latest development version of LISPBUILDER-SDL is required. Use
    Subversion to check out the source code:

   mkdir ~/src
   cd ~/src
   svn checkout http://lispbuilder.googlecode.com/svn/trunk/ lispbuilder

   Then symlink all the .asd files in that tree into ~/.sbcl/systems
   (or wherever your .ASD files go) like this:

   cd ~/.sbcl/systems
   for i in `find ~/src/lispbuilder -name "*.asd"`; do ln -s $i .; done

6. OPTIONAL: configure module directories

   Add something like this to a new file called ~/.iosketchrc:

  (setf iosketch:*module-directories* '(#P"/home/USERNAME/src/iosketch/" #P"/home/USERNAME/modules/"))

The first item should be the pathname of wherever you installed the
IOSKETCH source tree. This is auto-detected as the current directory if
you don't set it. NOTE: These must be pathnames (prefixed with #P) and
must contain a trailing slash.

The other directory should contain game modules. For example:

    cd ~/modules
    git clone git://github.com/dto/terahertz.git
    mv terahertz thz

7. At the shell, cd to the install directory for IOSKETCH, run SBCL, and
   then at the REPL:

    (require :iosketch)
    (iosketch:play "thz")  ;; or the name of a module in ~/modules

  If you get an error about TRIVIAL-FEATURES-TESTS, try this:
  (require :trivial-features-tests)

8. Here is my example .iosketchrc:

    ;; -*- Mode: lisp -*-

    (setf iosketch:*module-directories* '(#P"/home/dto/iosketch/" 
    	  			     #P"/home/dto/modules/"))
    (setf iosketch:*user-keyboard-layout* :qwerty)
    (setf iosketch:*use-sound* t)
    (setf iosketch:*message-logging* t)
     ;; fullscreen is a pain if IOSKETCH hangs
    (setf iosketch:*fullscreen* nil)

  
